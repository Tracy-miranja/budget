<div class="container">
  <div class="row">
    <% @categories.each do |category| %>
      <div class="row catago" onclick="window.location.href='<%= category.expenses.present? ? expense_path(category.expenses.first) : expenses_path(category_id: category.id) %>';">
        <div class="col">
          <div class="image-container">
            <% if category.image.attached? %>
              <%= image_tag url_for(category.image), class: "img-thumbnail" %>
            <% else %>
              <p>No Image</p>
            <% end %>
          </div>
        </div>

        <div class="col">
          <p><%= category.name %></p>
          <% created_date = category.created_at.strftime('%e%p %B %Y').strip %>
          <% formatted_date = created_date.sub(/\d+(st|nd|rd|th)/, '\1') %>
          <p><%= formatted_date %></p>
        </div>

        <div class="col">
          <% expense = category.expenses.first %>
          <% if expense %>
            <p><%= number_to_currency(expense.amount, unit: '$') %></p>
          <% else %>
            <p>No Expense</p>
          <% end %>
          <% if category.expenses.present? %>
            <%= link_to "View Expense", expense_path(category.expenses.first) %>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
  <%= link_to "New category", new_category_path, class: "btn btn-primary"  %>
</div>
